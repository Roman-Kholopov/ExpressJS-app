<!DOCTYPE html>
<html>
  <head>
    <title>users</title>
    <%- include('../partials/head'); %>
  </head>
  <body>
    <header>
      <%- include('../partials/header'); %>
    </header>
    <ul>
      <% users.forEach((user)=> { %>
          <li >
              <h2 >
                  <%= user.username %>
              </h2>
              <p>
                <%= user.id %>
              </p>
              <p>
                  <%= user.email %>
              </p>
              <button onclick="window.location.href='/users/<%= user.id %>/edit'">Edit</button>
              <!-- <button onclick="window.location.href='/users/<%= user.id %>'">Delete</button> -->
              <!-- <form action="/users/<%= user.id %>" method="DELETE"> -->
              <!-- <button type="submit" onclick="deleteUser(<%= user.id %>)">Delete</button> -->
              <button onclick="deleteUser(<%= user.id %>)">Delete</button>
              <a href="/users/<%= user.id %>"><button>Show</button></a>
          </li>
          <hr />
      <% }) %>
      </ul>
      <footer>
        <%- include('../partials/footer'); %>
      </footer>
      <script>
        function deleteUser(id) {
          try {
            console.log('deleteUser');
            fetch(`/users/${id}`, {
              method: 'DELETE',
            })
          } catch (err) {
            console.log(err)
          }
        }
      </script>
  </body>
</html>